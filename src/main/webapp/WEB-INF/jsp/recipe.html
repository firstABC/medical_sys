
<!DOCTYPE HTML>
<html>
<head>
	<title>医疗系统</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

	<link href="bootstrap/css/bootstrap.min.css" rel='stylesheet' type='text/css' />
	<link href="bootstrapValidator/bootstrapValidator.min.css" rel='stylesheet' type='text/css' />
	<link href="css/font-awesome.css" rel="stylesheet">

	<link rel="stylesheet" type="text/css" href="dataTables/css/jquery.dataTables.min.css">
	<link rel="stylesheet" type="text/css" href="dataTables/css/dataTables.tableTools.min.css">

	<link href="css/style.css" rel='stylesheet' type='text/css' />
	
	<script src="js/jquery-1.10.2.min.js"></script>
   	<script src="bootstrap/js/bootstrap.min.js"></script>
   	<script src="bootstrapValidator/bootstrapValidator.min.js"></script>
   	<!-- 打印 -->
   	<script type="text/javascript" src="js/jQuery.print.js"></script>
	<link href="css/print.css" rel='stylesheet' type='text/css' media='print' />

</head> 
<body>
   	<div class="page-container">
   		<!-- inner-content -->
		<div class="left-content left-content2">
			<div class="inner-content">
				<!-- top_bg -->
				<div class="header-section">
					<div class="top_bg">
						<div class="header_top">
							<div class="top_right">
								<ul>
									<li><a href="javascript:;">当前位置</a></li>|
									<li><a href="javascript:;">处方管理</a></li>|
									<li><a href="javascript:;">开处方</a></li>
								</ul>
							</div>
							<div class="top_left">
								<h2>
									<a href="javascript:;">张三<span>主治医师</span></a>
									<a href="javascript:;">退出</a>
									<span class="current-time"></span>
								</h2>
							</div>
							<div class="clearfix"></div>
						</div>
						
					</div>
					<div class="clearfix"></div>
				</div>
				<!-- content -->
				<div class="content">
					<div class="monthly-grid">
						<div class="panel-widget">
							<div class="panel panel-title">开处方</div>
							<div class="panel-body">
								<div class="tableBox tableCf">
									<div class="searchList">
										<div class="searchType">
											<label>长号</label>
											<input type="tel" name="" value="" class="form-control">
										</div>
										<div class="searchType"><button type="button" class="btn btn-info btn-sm">查询</button></div>
										<div class="fr">
											<button type="button" class="btn btn-info btn-sm">确定</button>
											<button type="button" class="btn btn-default btn-sm dy">打印</button>
										</div>
									</div>
									<div class="cfd">
										<!-- 根据长号查到的患者信息 -->
										<div class="info">
											<h4 class="text-center">北京东城宗喀藏医诊所<br/>处方单</h4>
											<form class="form-horizontal">
												<div class="form-group col-sm-3">
													<label for="" class="col-sm-4 control-label">姓名</label>
													<div class="col-sm-8">
														<input type="text" class="form-control" value="张三" disabled="disabled">
													</div>
												</div>
												<div class="form-group col-sm-3">
													<label for="" class="col-sm-4 control-label" id="uiIdcardNumber">性别</label>
													<div class="col-sm-8">
														<input type="text" class="form-control" value="男" disabled="disabled">
													</div>
												</div>
												<div class="form-group col-sm-3">
													<label for="" class="col-sm-4 control-label">年龄</label>
													<div class="col-sm-8">
														<input type="tel" class="form-control" value="26" disabled="disabled">
													</div>
												</div>
												<div class="form-group col-sm-3">
													<label for="" class="col-sm-4 control-label">日期</label>
													<div class="col-sm-8">
														<input type="data" class="form-control" value="2017.9.18" disabled="disabled">
													</div>
												</div>
											</form>
										</div>
										<div class="cfItem">
											<h4>RP：</h4>
											<table class="table-bordered table-striped table-hover" id="table" width="100%" border="0" cellspacing="0" cellpadding="2">
								    			<thead>
						                            <tr>
						                                <th>名称</th>
						                                <th>单价</th>
						                                <th>数量</th>
						                                <th>单位</th>
						                                <th>用法</th>
						                                <th>操作</th>
						                            </tr>
						                        </thead>
						                        <tbody>
						                        </tbody>
								    		</table>
											<div class="tj"><button type="button" class="btn btn-info btn-sm addBtn">添加药品</button></div>
										</div>
										<div class="other form-horizontal">
											<div class="form-group col-sm-4">
												<label for="" class="col-sm-4 control-label">医师</label>
												<div class="col-sm-8">
													<input type="tel" class="form-control" value="">
												</div>
											</div>
											<div class="form-group col-sm-4">
												<label for="" class="col-sm-4 control-label">司药</label>
												<div class="col-sm-8">
													<input type="text" class="form-control" value="">
												</div>
											</div>
											<div class="form-group col-sm-4">
												<label for="" class="col-sm-4 control-label">药价</label>
												<div class="col-sm-8">
													<input type="tel" class="form-control" value="">
												</div>
											</div>
											<div class="form-group col-sm-4">
												<label for="" class="col-sm-4 control-label">挂号</label>
												<div class="col-sm-8">
													<input type="tel" class="form-control" value="">
												</div>
											</div>
											<div class="form-group col-sm-4">
												<label for="" class="col-sm-4 control-label">编号</label>
												<div class="col-sm-8">
													<input type="tel" class="form-control" value="">
												</div>
											</div>
											<div class="form-group col-sm-4">
												<label for="" class="col-sm-4 control-label">收款人</label>
												<div class="col-sm-8">
													<input type="tel" class="form-control" value="">
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- 药品弹框 -->
			<div class="bg addDrug">
				<div class="itemBox">
					<div class="panel panel-title text-center">添加药品<a href="javascript:;" class="closeAdd fr"><i class="glyphicon glyphicon-remove" data-bv-icon-for="num" style=""></i></a></div>

					<div class="searchList listDrug">
						<div class="searchType ">
							<label>药名</label>
							<input type="text" name="" value="" class="form-control">
						</div>
						<div class="searchType">
							<label>编号</label>
							<input type="tel" name="" value="" class="form-control">
						</div>
						<div class="searchType"><button type="button" class="btn btn-info btn-sm">查询</button></div>
					</div>

					<table class="table-bordered table-striped table-hover" id="table2" width="100%" border="0" cellspacing="0" cellpadding="2">
		    			<thead>
	                        <tr>
	                            <th>药名</th>
	                            <th>编号</th>
	                            <th>单位</th>
	                            <th>单价</th>
	                            <th>操作</th>
	                        </tr>
	                    </thead>
	                    <tbody>
	                    	<tr>
				                <td name="ym">头孢颗粒</td>
				                <td name="bh">0001</td>
				                <td name="dw">盒</td>
				                <td name="dj">22.1</td>
				                <td>
				                	<div class="amount_box">
		                            	<a href="javascript:;" class="reduce">-</a><input class="sum" name="" type="text" value="1" disabled="disabled"><a href="javascript:;" class="plus">+</a>
			                        </div>
				                	<a href="javascript:;" class="add">添加</a>
				                </td>
	                    	</tr>
	                    	<tr>
	                    		<td name="ym">阿莫西林</td>
				                <td name="bh">0002</td>
				                <td name="dw">盒</td>
				                <td name="dj">16</td>
				                <td>
				                	<div class="amount_box">
		                            	<a href="javascript:;" class="reduce">-</a><input class="sum" name="" type="text" value="1" disabled="disabled"><a href="javascript:;" class="plus">+</a>
			                        </div>
				                	<a href="javascript:;" class="add">添加</a>
				                </td>
	                    	</tr>
	                    </tbody>
		    		</table>

		    	</div>
			</div>

		</div> 

		<!--/sidebar-menu-->
		<div class="sidebar-menu">
			<header class="logo1">
				<a href="javascript:;" class="sidebar-icon"><span class="fa fa-bars"></span></a> 
			</header>
			<div style="border-top:1px ridge rgba(255, 255, 255, 0.15)"></div>
               <div class="menu">
					<ul id="menu" >
						<li><a href="openUser.html" title="开户"><i class="fa fa-tachometer"></i> <span>开户</span></a></li>
						<li><a href="closeUser.html" title="销户"><i class="fa fa-file-text-o"></i> <span>销户</span></a></li>
						<li><a href="patient.html" title="患者管理"><i class="fa fa-user-md"></i> <span>患者管理</span></a></li>
						<li class="menu-academico">
						 	<a href="javascript:;" title="病历管理"><i class="fa fa-medkit"></i> <span>病历管理</span><span class="fa fa-angle-right" style="float: right"></span></a>
						    <ul class="menu-academico-sub" >
							    <li class="menu-academico-avaliacoes"><a href="addCase.html">新建病历</a></li>
								<li class="menu-academico-avaliacoes"><a href="patientHis.html">历史病历</a></li>
						  	</ul>
						</li>
						<li class="menu-academico">
						 	<a href="javascript:;" title="医疗卡"><i class="fa fa-address-card-o"></i> <span>医疗卡</span><span class="fa fa-angle-right" style="float: right"></span></a>
						    <ul class="menu-academico-sub" >
							    <li class="menu-academico-avaliacoes"><a href="rechangeCard.html">医疗卡充值</a></li>
								<li class="menu-academico-avaliacoes"><a href="consumeCard.html">医疗卡消费记录</a></li>
						  	</ul>
						</li>
						<li><a href="money.html" title="财务统计"><i class="fa fa-cny"></i> <span>财务统计</span></a></li>
						<li class="menu-academico">
						 	<a href="javascript:;" title="库房管理"><i class="fa fa-stethoscope"></i> <span>库房管理</span><span class="fa fa-angle-right" style="float: right"></span></a>
						    <ul class="menu-academico-sub" >
							    <li class="menu-academico-avaliacoes"><a href="drug.html">药品管理</a></li>
								<li class="menu-academico-avaliacoes"><a href="javascript:;">设备管理</a></li>
						  	</ul>
						</li>
						<li class="menu-academico">
						 	<a href="javascript:;" title="权限管理"><i class="fa fa-address-book"></i> <span>权限管理</span><span class="fa fa-angle-right" style="float: right"></span></a>
						    <ul class="menu-academico-sub" >
							    <li class="menu-academico-avaliacoes"><a href="user.html">用户管理</a></li>
								<li class="menu-academico-avaliacoes"><a href="role.html">角色管理</a></li>
						  	</ul>
						</li>
						<li class="menu-academico active">
						 	<a href="javascript:;" title="处方管理"><i class="fa fa-envelope-open-o"></i> <span>处方管理</span><span class="fa fa-angle-right" style="float: right"></span></a>
						    <ul class="menu-academico-sub" >
							    <li class="menu-academico-avaliacoes"><a href="recipe.html">开处方</a></li>
								<li class="menu-academico-avaliacoes"><a href="recipeHis.html">历史处方</a></li>
						  	</ul>
						</li>
					</ul>
				</div>
			</div>
	  	<div class="clearfix"></div>	
	</div>

	<!-- demo -->
   	<script type="text/javascript" src='js/js.js'></script>
   	
   	<script type="text/javascript" src="dataTables/js/jquery.dataTables.js"></script>
   	<script type="text/javascript" src="dataTables/js/dataTables.bootstrap.js"></script>
   	<script type="text/javascript">
		$(document).ready(function () {
	        var t = $('#table').DataTable({
	            "processing": true,
	            'searching': false,
	            "paging": false,
        		// "ajax": "dataTables/info.txt",

        		// 输入框和删除按钮
        		"aoColumnDefs":[
        			{
                        "targets": 4,
                        "data": null,
                        "bSortable": false,
                        "defaultContent": "<input type=\"text\" class=\"form-control\" name=\"\" value=\"\" placeholder=\"一日三次，每次两粒\">"
                    },
                    {
                        "targets": 5,
                        "data": null,
                        "bSortable": false,
                        "defaultContent": "<a id=\"del\"  href=\"#\">删除</a>"
                    } 
                ],

        		//插件的汉化
		        "oLanguage": {
		            "sLengthMenu": "每页显示 _MENU_ 条记录",
		            "sZeroRecords": "抱歉， 没有找到",
		            "sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",
		            "sInfoEmpty": "没有数据",
		            "sInfoFiltered": "(从 _MAX_ 条数据中检索)",
		            "oPaginate": {
		                "sFirst": false,
		                "sPrevious": false,
		                "sNext": false,
		                "sLast": false
		            },
		            "sZeroRecords": "没有检索到数据",
		            "sProcessing": "<img src='' />",
		            "sSearch": "搜索"
		        },
	        });
	        var t2 = $('#table2').DataTable({
	            "processing": true,
	            'searching': false,
        		// "ajax": "dataTables/info.txt",

        		//插件的汉化
		        "oLanguage": {
		            "sLengthMenu": "每页显示 _MENU_ 条记录",
		            "sZeroRecords": "抱歉， 没有找到",
		            "sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",
		            "sInfoEmpty": "没有数据",
		            "sInfoFiltered": "(从 _MAX_ 条数据中检索)",
		            "oPaginate": {
		                "sFirst": false,
		                "sPrevious": false,
		                "sNext": false,
		                "sLast": false
		            },
		            "sZeroRecords": "没有检索到数据",
		            "sProcessing": "<img src='' />",
		            "sSearch": "搜索"
		        },
	        });

			// 添加药品
			$('.addBtn').click(function(){
				$('html,body').animate({ scrollTop: 0 }, 500);
				$('.bg.addDrug').show();
			})
			$('.closeAdd').click(function(){
				$('.bg.addDrug').hide();
			})

			// 药品数量加减
			$(".plus").click(function() {
				var t = $(this).parent().find('input[class*=sum]');
				t.val(parseInt(t.val()) + 1);
			})
			$(".reduce").click(function() {
				var t = $(this).parent().find('input[class*=sum]');
				t.val(parseInt(t.val()) - 1)
				if(parseInt(t.val()) < 1) {
					t.val(1);
				}
			})

	        // 添加
            $('.addDrug .add').click(function(){
            	var ym = $(this).parent('td').siblings('td[name^="ym"]').text();
            	var dj = $(this).parent('td').siblings('td[name^="dj"]').text();
            	var num = $(this).siblings('.amount_box').children('.sum').val();
            	var dw = $(this).parent('td').siblings('td[name^="dw"]').text();
            	var yf = $(this).parent('td').siblings('td[name^="dw"]').text();
            	var input = $('#table tr').children('td:nth-last-child(2)').html();
            	var del = $('#table tr').children('td:last-child').html();
		        t.row.add([
		            ym,
		            dj,
		            num,
		            dw,
		            input,
		            del
		        ]).draw();
		    });

	        // 点击打印
	        $('.dy').on('click', function() {
                $(".cfd").print({
                    //Use Global styles
                    globalStyles : true,
                    //Add link with attrbute media=print
                    mediaPrint : true,
                    printContainer: true,
                    importCSS: true,
                    //Print in a hidden iframe
                    iframe : false,
                    //Don't print this
                    noPrintSelector : ".addBtn, .dataTables_length, .dataTables_info, .paging_simple_numbers, #table tr th:last-child, #table tr td:last-child",
                    //Add this at top
                    //Log to console when printing is done via a deffered callback
                    deferred: $.Deferred().done(function() { console.log('Printing done', arguments); })
                });
            });
			
	    });
	</script>

</body>
</html>